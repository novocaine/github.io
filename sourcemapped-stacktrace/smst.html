<!DOCTYPE html>
<html>
<script type="text/javascript"
  src="https://rawgithub.com/novocaine/sourcemapped-stacktrace/master/lib/source-map.js"></script>
<script type="text/javascript"
  src="https://rawgithub.com/novocaine/sourcemapped-stacktrace/master/sourcemapped-stacktrace.js"></script>
  <script type="text/javascript" src="bork-transpiled.js"></script>
<body>
  <p>A demo of printing a stack trace from an error thrown within transpiled code from traceur.</p>
  <button type="button" onclick="errorAndPrint()">Throw error in sourcemapped
    code</button>

  <p>Unmapped Stack trace (pointing to transpiled code):</p>

  <pre id="unmapped">
  </pre>

  <p>Source-mapped Stack trace (pointing to original code):</p>

  <pre id="mapped">
  </pre>

  <script type="text/javascript">
    var errorAndPrint = function() {
      try {
        runBork();
      } catch (e) {
        document.getElementById("unmapped").innerHTML = e.stack;
        mapStackTrace(e.stack, function(mappedStack) {
          document.getElementById("mapped").innerHTML =
            mappedStack;
        });
      }
    }
  </script>
</body>
</html>
