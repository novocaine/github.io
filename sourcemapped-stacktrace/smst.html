<!DOCTYPE html>
<html>
  <!--<script type="text/javascript"
  src="https://rawgithub.com/novocaine/sourcemapped-stacktrace/master/sourcemapped-stacktrace.js"></script>-->
  <script type="text/javascript"
    src="../../sourcemapped-stacktrace/dist/sourcemapped-stacktrace.js"></script>
  <script type="text/javascript" src="bork.coffee.js"></script>
<body>
  <p>A demo of printing a stack trace from an error thrown within transpiled code from traceur.</p>
  <button type="button" onclick="errorAndPrint()">Throw error in sourcemapped
    code</button>

  <p>Source-mapped Stack trace (pointing to original code):</p>

  <pre id="mapped">
  </pre>

  <p>Unmapped Stack trace (pointing to transpiled code):</p>

  <pre id="unmapped">
  </pre>

  <script type="text/javascript">
    var errorAndPrint = function() {
      try {
        bork();
      } catch (e) {
        document.getElementById("unmapped").innerHTML = e.stack;
        sourceMappedStackTrace.mapStackTrace(e.stack, function(mappedStack) {
          document.getElementById("mapped").innerHTML =
            mappedStack;
        });
      }
    }
  </script>

  <p>Alternatively, try throwing and not catching, to compare the trace in your
  browser's console: </p>
  <button type="button" onclick="bork()">Throw uncaught</button>
</body>
</html>
