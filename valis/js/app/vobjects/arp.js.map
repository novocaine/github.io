{"version":3,"sources":["../../../../../www/js/app/vobjects/arp.js"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,CAAC,QAAD,EAAW,sBAAX,EAAmC,SAAnC,EAA8C,UAA9C,CAAP,EACA,UAAC,CAAD,EAAI,OAAJ,EAAa,OAAb,EAAsB,IAAtB,EAA+B;MACvB;;;;;kCACQ;AAAE,eAAO,CAAP,CAAF;;;;mCACC;AAAE,eAAO,CAAP,CAAF;;;;AAEb,aAJI,WAIJ,CAAY,OAAZ,EAAqC;;;4BAJjC,aAIiC;;wCAAb;;OAAa;;kGAJjC,uDAKI,gBAAY,eADiB;;AAEnC,YAAK,WAAL,GAAmB,EAAE,GAAF,CAAM,WAAN,EAAmB,UAAC,CAAD;eAAO,WAAW,CAAX;OAAP,CAAtC,CAFmC;;KAArC;;iBAJI;;sCASY;AACd,eAAO,KAAK,WAAL,CAAiB,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,KAAK,WAAL,CAAiB,MAAjB,CAA5C,CAAP,CADc;;;;+BAIP,SAAS,QAAQ,SAAS;;;AACjC,YAAI,OAAO,CAAP,MAAc,SAAd,EAAyB;AAC3B,iBAAO,EAAP,CAD2B;SAA7B;;AAIA,YAAM,cAAc,EAAE,MAAF,CAAS,OAAO,CAAP,CAAT,EAAoB,UAAC,IAAD,EAAO,GAAP,EAAe;;AAErD,cAAI,IAAI,IAAJ,EAAU;AACZ,iBAAK,IAAL,CAAU,IAAI,OAAJ,CAAY,IAAI,UAAJ,EAAgB,OAAK,aAAL,EAA5B,CAAV,EADY;WAAd;AAGA,iBAAO,IAAP,CALqD;SAAf,EAMrC,EANiB,CAAd,CAL2B;;AAajC,eAAO,CAAC,WAAD,CAAP,CAbiC;;;;WAb/B;IAAoB,QAAQ,OAAR,EADG;;AA+B7B,cAAY,YAAZ,GAA2B,aAA3B,CA/B6B;AAgC7B,cAAY,aAAZ,GAA4B,KAA5B,CAhC6B;;AAkC7B,SAAO,WAAP,CAlC6B;CAA/B,CADA","file":"arp.js","sourcesContent":["define(['lodash', 'app/vobjects/vobject', 'app/msg', 'app/util'],\n(_, vobject, Message, util) => {\n  class Arpeggiator extends vobject.VObject {\n    numInputs() { return 1; }\n    numOutputs() { return 1; }\n\n    constructor(options, ...frequencies) {\n      super(options, ...frequencies);\n      this.frequencies = _.map(frequencies, (s) => parseFloat(s));\n    }\n\n    nextFrequency() {\n      return this.frequencies[Math.floor(Math.random() * this.frequencies.length)];\n    }\n\n    generate(context, inputs, outputs) {\n      if (inputs[0] === undefined) {\n        return [];\n      }\n\n      const frequencies = _.reduce(inputs[0], (memo, msg) => {\n        // gen new freq on rising edge only\n        if (msg.data) {\n          memo.push(new Message(msg.sampleTime, this.nextFrequency()));\n        }\n        return memo;\n      }, []);\n\n      return [frequencies];\n    }\n  }\n\n  Arpeggiator.vobjectClass = 'arpeggiator';\n  Arpeggiator.vobjectSymbol = 'arp';\n\n  return Arpeggiator;\n});\n"]}