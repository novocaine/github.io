{"version":3,"sources":["../../../../www/js/app/vobject_factory.js"],"names":[],"mappings":";;;;;;AAAA,OAAO,CAAC,iBAAD,EAAoB,kBAApB,EAAwC,oBAAxC,EACC,yBADD,EAC4B,oBAD5B,EACkD,mBADlD,EAEC,mBAFD,EAEsB,kBAFtB,EAE0C,mBAF1C,EAGC,oBAHD,EAGuB,kBAHvB,EAIC,QAJD,CAAP,EAKA,UAAC,EAAD,EAAK,GAAL,EAAU,KAAV,EAAiB,SAAjB,EAA4B,KAA5B,EAAmC,IAAnC,EAAyC,IAAzC,EAA+C,GAA/C,EAAoD,YAApD,EAAkE,KAAlE,EACA,WADA,EACa,CADb,EACmB;;AAEjB,MAAM,YAAY,CAAC,EAAD,EAAK,GAAL,EAAU,KAAV,EAAiB,UAAU,GAAV,EAAe,UAAU,GAAV,EAAe,KAA/C,EAAsD,IAAtD,EAChB,IADgB,EACV,GADU,EACL,YADK,EACS,KADT,EACgB,WADhB,CAAZ,CAFW;;MAKX;AACJ,aADI,cACJ,CAAY,MAAZ,EAAoB;4BADhB,gBACgB;;AAClB,WAAK,MAAL,GAAc,MAAd,CADkB;KAApB;;iBADI;;6BAKG,kBAAkB,IAAa;AACpC,YAAI,EAAE,oBAAoB,KAAK,WAAL,CAAiB,cAAjB,CAAtB,EAAwD;AAC1D,gBAAM,IAAI,KAAJ,yBAAgC,+BAAhC,CAAN,CAD0D;SAA5D;AAGA,aAAK,EAAC,KAAO,SAAP,IAAoB,OAAO,IAAP,GAAe,KAAK,MAAL,EAApC,GAAoD,EAApD,CAJ+B;;0CAAN;;SAAM;;AAKpC,YAAM,6CAAc,KAAK,WAAL,CAAiB,cAAjB,CAAgC,gBAAhC,kBAAkD,EAAE,MAAF,KACjE,SADC,CAL8B;AAOpC,eAAO,OAAP,CAPoC;;;;WALlC;MALW;;AAqBjB,iBAAe,cAAf,GAAgC,EAAE,SAAF,CAAY,UAAU,GAAV,CAAc,UAAC,MAAD;WACxD,CAAC,OAAO,YAAP,EAAqB,MAAtB;GADwD,CAA1B,CAAhC,CArBiB;;AAyBjB,SAAO,cAAP,CAzBiB;CADnB,CALA","file":"vobject_factory.js","sourcesContent":["define(['app/vobjects/js', 'app/vobjects/dac', 'app/vobjects/cycle',\n        'app/vobjects/binary_ops', 'app/vobjects/delay', 'app/vobjects/midi',\n        'app/vobjects/mtof', 'app/vobjects/log', 'app/vobjects/adsr',\n        'app/vobjects/pulse', 'app/vobjects/arp',\n        'lodash'],\n(JS, DAC, Cycle, binaryOps, Delay, Midi, MtoF, Log, ADSREnvelope, Pulse,\nArpeggiator, _) => {\n  // register them here\n  const classList = [JS, DAC, Cycle, binaryOps.Mul, binaryOps.Add, Delay, Midi,\n    MtoF, Log, ADSREnvelope, Pulse, Arpeggiator];\n\n  class VObjectFactory {\n    constructor(nextId) {\n      this.nextId = nextId;\n    }\n\n    create(vobjectClassname, id, ...args) {\n      if (!(vobjectClassname in this.constructor.vobjectClasses)) {\n        throw new Error(`vobject with class ${vobjectClassname} not found`);\n      }\n      id = (id === undefined || id === null) ? this.nextId++ : id;\n      const vobject = new this.constructor.vobjectClasses[vobjectClassname]({ id },\n        ...args);\n      return vobject;\n    }\n  }\n\n  VObjectFactory.vobjectClasses = _.fromPairs(classList.map((_class) =>\n    [_class.vobjectClass, _class]\n  ));\n\n  return VObjectFactory;\n});\n"]}