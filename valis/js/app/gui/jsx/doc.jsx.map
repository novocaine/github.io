{"version":3,"sources":["../../../../../../www/js/app/gui/jsx/doc.jsx"],"names":[],"mappings":";;AAAA,OAAO,CAAC,WAAD,EACC,eADD,EAEC,eAFD,EAGC,QAHD,EAIC,mBAJD,EAKC,qBALD,EAMC,YAND,CAAP,EAOA,UAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,CAA5B,EAA+B,cAA/B,EAA+C,cAA/C,EAA+D,CAA/D,EAAqE;;;;AAInE,MAAM,MAAM,MAAM,WAAN,CAAkB;;;AAC5B,eAAW;AACT,kBAAY,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;KADd;;AAIA,YAAQ,kBAAM;AACZ,aACE;;UAAK,WAAU,KAAV,EAAL;QACE;;YAAK,WAAU,SAAV,EAAL;UACE,oBAAC,OAAD,IAAS,gBAAT,CADF;UAEE,oBAAC,WAAD,IAAa,gBAAb,CAFF;SADF;QAKE,oBAAC,eAAe,cAAhB,IAA+B,KAAI,WAAJ,EAAgB;AAC7C,sBAAY,UAAK,KAAL,CAAW,UAAX;SADd,CALF;OADF,CADY;KAAN;GALE,CAAN;;;;;AAJ6D,MA2B7D,UAAU,MAAM,WAAN,CAAkB;;;AAChC,YAAQ,kBAAM;AACZ,aAAQ;;UAAI,WAAU,SAAV,EAAJ;;QACN,EAAE,SAAF,CAAY,eAAe,cAAf,EACV,UAAC,MAAD,EAAS,KAAT,EAAmB;AACjB,iBACE;;cAAI,WAAU,cAAV,EAAyB,KAAK,KAAL,EAAY,kBAAgB,KAAhB,EAAzC;YACG,KADH;WADF,CADiB;SAAnB,CAFI;;OAAR,CADY;KAAN;;AAaR,uBAAmB,6BAAM;AACvB,QAAE,UAAK,UAAL,EAAF,EAAqB,IAArB,CAA0B,IAA1B,EAAgC,IAAhC,CAAqC,EAAE,IAAF,CAAO,UAAC,CAAD,EAAI,EAAJ,EAAW;AACrD,UAAE,EAAF,EAAM,SAAN,CAAgB;AACd,mBAAS,GAAT;AACA,kBAAQ,OAAR;AACA,kBAAQ,SAAR;SAHF,EADqD;OAAX,WAAP,CAArC,EADuB;KAAN;GAdL,CAAV,CA3B6D;;AAoDnE,MAAM,cAAc,MAAM,WAAN,CAAkB;;;AACpC,eAAW;AACT,WAAK,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;KADP;;AAIA,YAAQ,kBAAM;AACZ,aACE;;UAAQ,WAAU,cAAV,EAAyB,SAAS,UAAK,OAAL,EAA1C;QACE,UAAK,KAAL,CAAW,GAAX,CAAe,KAAf,CAAqB,UAArB,CAAgC,YAAhC,KACE,eADF,GACoB,cADpB;OAFJ,CADY;KAAN;;AASR,aAAS,mBAAM;AACb,gBAAK,KAAL,CAAW,GAAX,CAAe,KAAf,CAAqB,UAArB,CAAgC,WAAhC,CACE,CAAC,UAAK,KAAL,CAAW,GAAX,CAAe,KAAf,CAAqB,UAArB,CAAgC,YAAhC,EAAD,CADF,CADa;AAGb,gBAAK,QAAL,CAAc,EAAd,EAHa;KAAN;GAdS,CAAd,CApD6D;;AAyEnE,MAAM,SAAS,SAAT,MAAS,CAAC,KAAD,EAAW;AACxB,aAAS,MAAT,CAAgB,oBAAC,GAAD,IAAK,YAAY,KAAZ,EAAL,CAAhB,EACE,SAAS,IAAT,CADF,CADwB;GAAX,CAzEoD;;AA8EnE,SAAO;AACL,YADK;AAEL,kBAFK;GAAP,CA9EmE;CAArE,CAPA","file":"doc.jsx","sourcesContent":["define(['lib/react',\n        'lib/react-dom',\n        'lib/jquery-ui',\n        'jquery',\n        'app/gui/jsx/patch',\n        'app/vobject_factory',\n        'lib/lodash'],\n(React, ReactDOM, jqueryui, $, patchComponent, vobjectFactory, _) => {\n  /**\n   * The top-level 'document' component.\n   */\n  const Doc = React.createClass({\n    propTypes: {\n      patchModel: React.PropTypes.object.isRequired\n    },\n\n    render: () => {\n      return (\n        <div className=\"doc\">\n          <div className=\"toolbar\">\n            <Palette doc={this} />\n            <EnableAudio doc={this} />\n          </div>\n          <patchComponent.PatchComponent ref=\"rootPatch\" doc={this}\n            patchModel={this.props.patchModel}\n          />\n        </div>\n      );\n    }\n  });\n\n  /**\n   * The tool palette, containing vobjects to drag into the patch.\n   */\n  const Palette = React.createClass({\n    render: () => {\n      return (<ul className=\"palette\"> {\n        _.mapValues(vobjectFactory.vobjectClasses,\n          (vclass, cname) => {\n            return (\n              <li className=\"palette-item\" key={cname} data-classname={cname}>\n                {cname}\n              </li>\n            );\n          })\n      } </ul>);\n    },\n\n    componentDidMount: () => {\n      $(this.getDOMNode()).find('li').each(_.bind((i, li) => {\n        $(li).draggable({\n          opacity: 0.7,\n          helper: 'clone',\n          revert: 'invalid'\n        });\n      }, this));\n    }\n  });\n\n  const EnableAudio = React.createClass({\n    propTypes: {\n      doc: React.PropTypes.object.isRequired\n    },\n\n    render: () => {\n      return (\n        <button className=\"enable-audio\" onClick={this.onClick}>{\n          this.props.doc.props.patchModel.audioEnabled() ?\n            'Disable Audio' : 'Enable Audio'\n        }\n        </button>);\n    },\n\n    onClick: () => {\n      this.props.doc.props.patchModel.enableAudio(\n        !this.props.doc.props.patchModel.audioEnabled());\n      this.setState({});\n    }\n  });\n\n  const render = (model) => {\n    ReactDOM.render(<Doc patchModel={model} />,\n      document.body);\n  };\n\n  return {\n    Doc,\n    render\n  };\n});\n"]}