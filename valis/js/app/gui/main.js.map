{"version":3,"sources":["../../../../../www/js/app/gui/main.js"],"names":[],"mappings":";;AAAA,OAAO,CACL,iBADK,EAEL,iBAFK,EAGL,QAHK,CAAP,EAIA,UAAC,GAAD,EAAM,UAAN,EAAkB,CAAlB,EAAwB;AACtB,MAAM,OAAO,SAAP,IAAO,GAAM;;;;AAIjB,QAAM,SAAS,SAAS,MAAT,CAJE;AAKjB,QAAM,QAAQ,OAAO,KAAP,CAAa,mBAAb,CAAR,CALW;AAMjB,QAAI,KAAJ,EAAW;AACT,QAAE,GAAF,CAAM,MAAM,CAAN,CAAN,EACG,IADH,CACQ,UAAC,IAAD,EAAU;AACd,YAAM,QAAQ,IAAI,UAAJ,CAAe,IAAf,CAAR,CADQ;AAEd,cAAM,KAAN,EAFc;OAAV,CADR,CAKG,IALH,CAKQ,YAAM;;AAEV,YAAM,QAAQ,IAAI,UAAJ,EAAR,CAFI;AAGV,cAAM,KAAN,EAHU;OAAN,CALR,CADS;KAAX,MAWO;AACL,YAAM,IAAI,UAAJ,EAAN,EADK;KAXP;GANW,CADS;;AAuBtB,MAAM,QAAQ,SAAR,KAAQ,CAAC,KAAD,EAAW;AACvB,QAAM,eAAe,IAAI,MAAJ,CAAW,KAAX,CAAf;;;;AADiB,UAKvB,CAAO,UAAP,CAAkB,YAAM;AACtB,YAAM,WAAN,GADsB;AAEtB,mBAAa,QAAb,CAAsB,EAAtB,EAFsB;KAAN,EAGf,GAHH,EALuB;GAAX,CAvBQ;;AAkCtB,SAAO,EAAE,UAAF,EAAP,CAlCsB;CAAxB,CAJA","file":"main.js","sourcesContent":["define([\n  'app/gui/jsx/doc',\n  'app/patch_model',\n  'jquery'],\n(doc, PatchModel, $) => {\n  const init = () => {\n    // entry point for the app. Create a ocument and render the gui.\n\n    // do we have a JSON document specified in the url?\n    const params = location.search;\n    const match = params.match(/\\?.*patch=([^&]+)/);\n    if (match) {\n      $.get(match[1])\n        .done((json) => {\n          const model = new PatchModel(json);\n          start(model);\n        })\n        .fail(() => {\n          // TODO: show error message\n          const model = new PatchModel();\n          start(model);\n        });\n    } else {\n      start(new PatchModel());\n    }\n  };\n\n  const start = (model) => {\n    const docComponent = doc.render(model);\n    // enable audio by default, but delay it being enabled to try to allow\n    // everything to settle - otherwise you get nasty pops while the browsers\n    // still buzzing about rendering\n    window.setTimeout(() => {\n      model.enableAudio();\n      docComponent.setState({});\n    }, 500);\n  };\n\n  return { init };\n});\n"]}